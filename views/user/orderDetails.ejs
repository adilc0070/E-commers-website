<%- include ('../user/layout/header.ejs')%>
<%- include ('../user/layout/profileSideBar.ejs')%>

<div class="container mt-5">
    <h2 class="mb-4">User's Ordered Products</h2>

    <% if (orders.length > 0) { %>
        <% orders.forEach(order => { %>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Date</th>
                        <th>Total</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><%= order.orderId %></td>
                        <td><%= order.date %></td>
                        <td><span>â‚¹ <%= order.totalAmount %></span></td>
                        <td><%= order.status %></td>
                        <td><a href="/order-details?id=<%= order.orderId %>">View Details</a></td>
                    </tr>
                </tbody>
            </table>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th colspan="2">Product</th>
                        <th colspan="3">Product Details</th>
                    </tr>
                </thead>
                <tbody>
                    <% order.products.forEach(product => { %>
                        <tr>
                            <td colspan="2"><%= product.name %></td>
                            <td colspan="3">Product Image: <img src="<%= product.imageURL %>" alt="<%= product.name %>"></td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th colspan="5">Delivery Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="5"><%= order.deliveryAddress %></td>
                    </tr>
                </tbody>
            </table>
        <% }) %>
    <% } else { %>
        <p>No orders found.</p>
    <% } %>
</div>

<%- include ('../user/layout/footer.ejs')%>
